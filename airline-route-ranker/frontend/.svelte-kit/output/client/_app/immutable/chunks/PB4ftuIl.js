import{h as l,ak as v,al as g,am as p,an as y,ao as m,ap as w,l as S,F as A}from"./2EktXFFV.js";import{a as b,l as E}from"./e9gZCKO6.js";function h(r){var e,a,t="";if(typeof r=="string"||typeof r=="number")t+=r;else if(typeof r=="object")if(Array.isArray(r)){var s=r.length;for(e=0;e<s;e++)r[e]&&(a=h(r[e]))&&(t&&(t+=" "),t+=a)}else for(a in r)r[a]&&(t&&(t+=" "),t+=a);return t}function k(){for(var r,e,a=0,t="",s=arguments.length;a<s;a++)(r=arguments[a])&&(e=h(r))&&(t&&(t+=" "),t+=e);return t}function C(r){return typeof r=="object"?k(r):r??""}function $(r,e,a){var t=r==null?"":""+r;return e&&(t=t?t+" "+e:e),t===""?null:t}function M(r,e,a,t,s,o){var c=r.__className;if(l||c!==a){var n=$(a,t);(!l||n!==r.getAttribute("class"))&&(n==null?r.removeAttribute("class"):r.className=n),r.__className=a}return o}const N=Symbol("is custom element"),T=Symbol("is html");function H(r){if(l){var e=!1,a=()=>{if(!e){if(e=!0,r.hasAttribute("value")){var t=r.value;_(r,"value",null),r.value=t}if(r.hasAttribute("checked")){var s=r.checked;_(r,"checked",null),r.checked=s}}};r.__on_r=a,m(a),b()}}function _(r,e,a,t){var s=U(r);l&&(s[e]=r.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&r.nodeName==="LINK")||s[e]!==(s[e]=a)&&(e==="loading"&&(r[v]=a),a==null?r.removeAttribute(e):typeof a!="string"&&j(r).includes(e)?r[e]=a:r.setAttribute(e,a))}function U(r){return r.__attributes??(r.__attributes={[N]:r.nodeName.includes("-"),[T]:r.namespaceURI===g})}var d=new Map;function j(r){var e=d.get(r.nodeName);if(e)return e;d.set(r.nodeName,e=[]);for(var a,t=r,s=Element.prototype;s!==t;){a=y(t);for(var o in a)a[o].set&&e.push(o);t=p(t)}return e}function I(r,e,a=e){var t=w();E(r,"input",s=>{var o=s?r.defaultValue:r.value;if(o=f(r)?u(o):o,a(o),t&&o!==(o=e())){var c=r.selectionStart,n=r.selectionEnd;r.value=o??"",n!==null&&(r.selectionStart=c,r.selectionEnd=Math.min(n,r.value.length))}}),(l&&r.defaultValue!==r.value||S(e)==null&&r.value)&&a(f(r)?u(r.value):r.value),A(()=>{var s=e();f(r)&&s===u(r.value)||r.type==="date"&&!s&&!r.value||s!==r.value&&(r.value=s??"")})}function f(r){var e=r.type;return e==="number"||e==="range"}function u(r){return r===""?null:+r}const i="http://localhost:8000";console.log("API_BASE_URL:",i);async function O(r,e,a){let t=`${i}/api/rankings/${r.toUpperCase()}/${e.toUpperCase()}`;const s=new URLSearchParams;a&&s.append("date",a),s.append("max_routes","10"),s.toString()&&(t+=`?${s.toString()}`);const o=await fetch(t);if(!o.ok){let c=`HTTP error ${o.status}`;try{c=(await o.json()).detail||c}catch{}throw new Error(c)}return await o.json()}async function P(){try{const r=await fetch(`${i}/api/health`);if(!r.ok)throw new Error(`Health check failed: ${r.status}`);return await r.json()}catch(r){return console.warn("Health check failed:",r),{status:"error",system_initialized:!1}}}async function D(r,e){const a=`${i}/api/cache/dates/${r.toUpperCase()}/${e.toUpperCase()}`;try{return(await(await fetch(a)).json()).available_dates||[]}catch(t){return console.warn("Error fetching available dates:",t),[]}}async function F(r){const e=`${i}/api/contact`;console.log(`Submitting contact form to: ${e}`),console.log("Form data:",JSON.stringify(r));try{const a=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(console.log(`Response status: ${a.status} ${a.statusText}`),!a.ok){let s=`HTTP error ${a.status}`;try{const o=await a.json();console.error("Error response data:",o),s=o.detail||s}catch(o){console.error("Failed to parse error JSON:",o)}throw new Error(s)}const t=await a.json();return console.log("Response data:",t),t}catch(a){return console.error("Error submitting contact form:",a),{status:"error",message:a instanceof Error?a.message:"Unknown error occurred"}}}export{F as a,I as b,C as c,_ as d,D as e,P as f,O as g,H as r,M as s};
